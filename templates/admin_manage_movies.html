<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Admin - Manage Movies</title>
  <style>
    body { font-family: Arial, sans-serif; background:#0f0f0f; color:#eee; padding:20px; margin:0; }
    .wrap { max-width:1000px; margin:20px auto; background:#1e1e1e; padding:22px; border-radius:8px; }
    table { width:100%; border-collapse:collapse; margin-top:12px; }
    th, td { padding:8px; border-bottom:1px solid #2a2a2a; text-align:left; color:#ddd; }
    .missing { color:#ff8a8a; font-weight:bold; }
    a.button { padding:6px 10px; background:#00d4ff; color:#111; border-radius:6px; text-decoration:none; font-weight:bold; }
  </style>
</head>
<body>
  <div class="wrap">
    <h2>Manage Movies</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div style="margin-bottom:12px;">
      <a class="button" href="{{ url_for('admin.add_movie_form') }}">Add Movie</a>
      <a class="button" href="{{ url_for('admin.bulk_upload') }}">Bulk Upload</a>
      <a class="button" href="{{ url_for('admin.logout') }}">Logout</a>
    </div>

    <table>
      <thead>
        <tr><th>ID</th><th>Title</th><th>Has File/URL?</th><th>Aliases</th><th>Actions</th></tr>
      </thead>
      <tbody>
        {% for m in movies %}
          <tr>
            <td>{{ m.id }}</td>
            <td>{{ m.title }}</td>
            <td>
              {% if m.url or m.file_id %}
                Yes
              {% else %}
                <span class="missing">Missing</span>
              {% endif %}
            </td>
            <td>{{ m.aliases }}</td>
            <td>
              <a class="button" href="{{ url_for('admin.edit_movie', movie_id=m.id) }}">Edit</a>
              <!-- optionally add delete endpoint/link -->
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</body>
</html>
